<h1>New Encounter!</h1>

<div
  data-controller="autoclicker"
  data-autoclicker-rate-value="<%= current_user.auto_click_rate %>"
  data-autoclicker-user-id-value="<%= current_user.id %>">
</div>

<% if @pokemon %>
  <% if @is_shiny %>
    <p>You encountered a Shiny <%= @pokemon.name %>!</p>
    <img src="<%= @pokemon.shiny_sprite %>" alt="<%= @pokemon.name %> Shiny Sprite" width="150" height="150">
  <% else %>
    <p>You encountered a <%= @pokemon.name %>!</p>
    <img src="<%= @pokemon.sprite %>" alt="<%= @pokemon.name %> Sprite" width="150" height="150">
  <% end %>
  <%= form_with url: encounters_path, method: :post do %>
    <%= hidden_field_tag :pokemon_id, @pokemon.id %>
    <%= hidden_field_tag :shiny, @is_shiny %>
    <%= submit_tag "Catch Pokémon!" %>
  <% end %>

<% else %>
  <p>No Pokémon encountered yet. Try again!</p>
  <%= link_to 'Try Again', new_encounter_path %>
<% end %>

<!-- Add a button to go to the user's profile -->
<%= link_to 'View Profile', profile_path, class: 'button' %>
<p>Total Pokémon caught: <span id="catch-count"><%= current_user.catch_count %></span></p>
<p>Pokemon catch rate: <span><%= current_user.auto_click_rate %></span> per second</p>